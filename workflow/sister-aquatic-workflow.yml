cwlVersion: v1.2
class: Workflow
inputs:
  workflow_context: File
  pge_prep_filepath: string
  run_pge_filepath: string
  post_pge_filepath: string
  input_context: File[]?
  pges_to_run: string?

outputs:
  context:
    type: File[]
    outputSource: l2b_benthic_classification-workflow/context

requirements:
  SubworkflowFeatureRequirement: {}
  MultipleInputFeatureRequirement: {}
  InlineJavascriptRequirement: {}

steps:
  l2b_benthic_inversion-workflow:
    run: pge-workflow.yml
    in:
      pge_prep_filepath: pge_prep_filepath
      workflow_context: workflow_context
      step_key:
        default: "l2b_benthic_inversion"
      input_context: input_context
      run_pge_filepath: run_pge_filepath
      post_pge_filepath: post_pge_filepath
    out: [context]

  l2b_benthic_classification-workflow:
    run: pge-workflow.yml
    in:
      pge_prep_filepath: pge_prep_filepath
      workflow_context: workflow_context
      step_key:
        default: "l2b_benthic_classification"
      input_context:
        source: [l2b_benthic_inversion-workflow/context]
      run_pge_filepath: run_pge_filepath
      post_pge_filepath: post_pge_filepath
    out: [ context ]

  l2b_aquatic_pigments_inversion-workflow:
    run: pge-workflow.yml
    in:
      pge_prep_filepath: pge_prep_filepath
      workflow_context: workflow_context
      step_key:
        default: "l2b_aquatic_pigments_inversion"
      input_context: input_context
      run_pge_filepath: run_pge_filepath
      post_pge_filepath: post_pge_filepath
    out: [ context ]
